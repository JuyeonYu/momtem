
<main class="page page--reviews-index">
  <header class="page-header">
    <h1 class="page-title">리뷰 목록</h1>
    <nav class="page-actions">
      <%= link_to "새 리뷰 작성", new_review_path, class: "action action--create" %>
    </nav>
  </header>


  <% if @reviews.nil? %>
    <div class="state state--loading">불러오는 중...</div>
  <% elsif @reviews.empty? %>
    <section class="state state--empty">
      <p class="state-text">아직 리뷰가 없습니다.</p>
    </section>
  <% else %>
    <section class="list list--reviews">
      <% @reviews.each do |review| %>
        <article class="item item--review">
          <a href="<%= review_path(review) %>" class="item-link">
            <figure class="item-thumb">
              <% if (blob = review.first_image_blob) %>
                <%= image_tag blob.variant(resize_to_fill: [420, 280]).processed,
                              alt: review.title %>
              <% end %>
            </figure>

            <div class="item-content">
              <h2 class="item-title"><%= review.title %></h2>
              <p class="item-summary">
                <%= truncate(strip_tags(review.body.to_s), length: 80) %>
              </p>
            </div>
          </a>
        </article>
      <% end %>
    </section>
  <% end %>
</main>
