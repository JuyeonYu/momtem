<h1>추천 아이템 목록</h1>

<div class="filters" style="margin-bottom: 12px;">
  <% @item_types.each do |type| %>
    <%= link_to type, recommand_items_path(filter: type), data: { turbo_frame: "items" }, class: "btn btn-sm btn-outline-primary" %>
  <% end %>
  <%= link_to "전체", recommand_items_path, data: { turbo_frame: "items" }, class: "btn btn-sm btn-secondary" %>
</div>

<%= turbo_frame_tag "items" do %>
    <% @recommand_items.group_by(&:item_type).each do |type, items| %>
        <h1> <%= type %> </h1>

        <ol>
            <% items.each do |item| %>
            <li>
              <h2><%= link_to item.title, recommand_item_path(item), data: { turbo_frame: "_top" } %></h2>
              <%= item.body %> 
              <%= link_to item.link, item.link, target: "_blank", rel: "noopener"  %>

              <% if item.og_image.present? %>
              <img src="<%= item.og_image %>" alt="" style="max-width:240px; height:auto;">
              <% end %>


              <p><%= item.og_description.presence || item.body %></p>
            </li>
        <% end %>
        </ol>
    <% end %>
<% end %>
